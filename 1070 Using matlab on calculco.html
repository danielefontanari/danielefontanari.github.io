<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li:not(:nth-child(14)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(14) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(14) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(14) > ul.nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Using matlab on calculco | A linux crash course</title> <meta name="generator" content="Jekyll v4.3.2" /> <meta property="og:title" content="Using matlab on calculco" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Learn Linux the fun way!" /> <meta property="og:description" content="Learn Linux the fun way!" /> <link rel="canonical" href="/1070%20Using%20matlab%20on%20calculco.html" /> <meta property="og:url" content="/1070%20Using%20matlab%20on%20calculco.html" /> <meta property="og:site_name" content="A linux crash course" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Using matlab on calculco" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Learn Linux the fun way!","headline":"Using matlab on calculco","url":"/1070%20Using%20matlab%20on%20calculco.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> A linux crash course </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/0050%20Connection%20from%20a%20local%20machine.html" class="nav-list-link">Connection from a local machine</a></li><li class="nav-list-item"><a href="/0100%20The%20front-end%20and%20data%20transfer.html" class="nav-list-link">The front-end and data transfer machines</a></li><li class="nav-list-item"><a href="/0200%20Introduction%20to%20BASH.html" class="nav-list-link">Introduction to BASH</a></li><li class="nav-list-item"><a href="/0300%20The%20pwd%20Command.html" class="nav-list-link">The pwd Command</a></li><li class="nav-list-item"><a href="/0400%20The%20ls%20Command.html" class="nav-list-link">The ls Command</a></li><li class="nav-list-item"><a href="/0500%20The%20cd%20Command.html" class="nav-list-link">The cd Command</a></li><li class="nav-list-item"><a href="/0550%20Understanding%20Storage%20Spaces%20on%20Calculco.html" class="nav-list-link">Understanding Storage Spaces on Calculco</a></li><li class="nav-list-item"><a href="/0600%20Creating%20and%20Removing%20Directories.html" class="nav-list-link">Creating and Removing Directories</a></li><li class="nav-list-item"><a href="/0700%20Creating%20files%20and%20Basic%20Text%20Editing.html" class="nav-list-link">Creating files and Basic Text Editing</a></li><li class="nav-list-item"><a href="/0800%20Copying%20Files%20and%20Directories.html" class="nav-list-link">Copying Files and Directories</a></li><li class="nav-list-item"><a href="/0900%20Moving%20and%20Renaming%20Files.html" class="nav-list-link">Moving and Renaming Files</a></li><li class="nav-list-item"><a href="/1000%20Removing%20Files.html" class="nav-list-link">Removing Files</a></li><li class="nav-list-item"><a href="/1050%20Calculating%20on%20Calculco.html" class="nav-list-link">Calculating on Calculco</a></li><li class="nav-list-item"><a href="/1070%20Using%20matlab%20on%20calculco.html" class="nav-list-link">Using matlab on calculco</a></li><li class="nav-list-item"><a href="/1100%20Advanced%20File%20Operations%20and%20Globbing.html" class="nav-list-link">Advanced File Operations and Globbing</a></li><li class="nav-list-item"><a href="/1200%20Useful%20BASH%20tricks.html" class="nav-list-link">Useful BASH tricks</a></li><li class="nav-list-item"><a href="/about/" class="nav-list-link">About</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search A linux crash course" aria-label="Search A linux crash course" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <div id="main-content" class="main-content"> <main> <h1 class="no_toc" id="using-matlab-on-calculco"> <a href="#using-matlab-on-calculco" class="anchor-heading" aria-labelledby="using-matlab-on-calculco"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using matlab on calculco </h1> <h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents </h2> <ol id="markdown-toc"> <li><a href="#introduction" id="markdown-toc-introduction">Introduction</a></li> <li><a href="#launching-matlab-in-interactive-mode-command-line" id="markdown-toc-launching-matlab-in-interactive-mode-command-line">Launching matlab in interactive mode (command line)</a></li> <li><a href="#launching-matlab-in-interactive-mode-graphical" id="markdown-toc-launching-matlab-in-interactive-mode-graphical">Launching matlab in interactive mode (graphical)</a></li> <li><a href="#matlab-tokens" id="markdown-toc-matlab-tokens">Matlab tokens</a></li> <li><a href="#launching-matlab-in-batch-mode" id="markdown-toc-launching-matlab-in-batch-mode">Launching matlab in batch mode</a></li> <li><a href="#compiling-matlab-code" id="markdown-toc-compiling-matlab-code">Compiling matlab code</a></li> </ol><hr /> <h2 id="introduction"> <a href="#introduction" class="anchor-heading" aria-labelledby="introduction"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Introduction </h2> <p>On calculco it is possible to use matlab. Due to the remote nature of calculco, some care must be taken in order to use it.</p> <h2 id="launching-matlab-in-interactive-mode-command-line"> <a href="#launching-matlab-in-interactive-mode-command-line" class="anchor-heading" aria-labelledby="launching-matlab-in-interactive-mode-command-line"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Launching matlab in interactive mode (command line) </h2> <p>To use matlab, we need to connect to a node (since it is forbidden to do calculations on the login node). For now we will start an interactive job:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>oarsub <span class="nt">-I</span> <span class="nt">-l</span> /nodes<span class="o">=</span>1/core<span class="o">=</span>2,walltime<span class="o">=</span>1:00:00
</code></pre></div></div> <p>now, you need to load the matlab module:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ml matlab
</code></pre></div></div> <p>this is a short for <code class="language-plaintext highlighter-rouge">module load matlab</code>. A module is a piece of software that can be loaded into the environment. to see all available modules, use <code class="language-plaintext highlighter-rouge">ml av</code>. To see all loaded modules, use <code class="language-plaintext highlighter-rouge">ml list</code>. To unload a module, use <code class="language-plaintext highlighter-rouge">ml unload &lt;module&gt;</code>. To unload all modules, use <code class="language-plaintext highlighter-rouge">ml purge</code>. for instance we see that the output of <code class="language-plaintext highlighter-rouge">ml av</code> contains:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-------------------------------------------------------------------------------------- /nfs/opt/apps/modulefiles/Core --------------------------------------------------------------------------------------
   OpenCV/intel-3.4        ampl/2019        conda/4.5          dmtcp/3.0.0 (D)    java/jdk-20 (D)    matlab/MCR_2023a    matlab/R2022a        sumo/1.1
   OpenCV/3.2              ampl/2020        conda/22.9  (D)    elsa/1.0           julia/0.6          matlab/MCR_2023b    matlab/R2023a
   OpenCV/3.3       (D)    ampl/2021 (D)    dmtcp/2-5.1        java/jdk-17        julia/1.0   (D)    matlab/R2021b       matlab/R2023b (D)
</code></pre></div></div> <p>we see that there are multiple versions of matlab available. The presence of a symbol <code class="language-plaintext highlighter-rouge">(D)</code> indicates that the module <code class="language-plaintext highlighter-rouge">matlab/R2023b</code> is loaded by default if <code class="language-plaintext highlighter-rouge">ml matlab</code> is invoked. To load a specific version, use for example <code class="language-plaintext highlighter-rouge">ml matlab/R2021b</code>.</p> <p>Now we can start matlab:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>matlab <span class="nt">-nodisplay</span> <span class="nt">-nodesktop</span> <span class="nt">-nosplash</span>
</code></pre></div></div> <p>the parameters <code class="language-plaintext highlighter-rouge">-nodisplay -nodesktop -nosplash</code> are necessary because we do not want to launch matlab in graphical mode.</p> <p>you will be welcomed by the matlab prompt:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dfontanari@orval04:~/asdf$ matlab -nodisplay -nodesktop -nosplash

                             &lt; M A T L A B (R) &gt;
                   Copyright 1984-2023 The MathWorks, Inc.
              R2023b Update 2 (23.2.0.2391609) 64-bit (glnxa64)
                              September 22, 2023

 
To get started, type doc.
For product information, visit www.mathworks.com.
 
&gt;&gt; 
</code></pre></div></div> <p>At this point you can interact with the system as usual:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt; x=1;
&gt;&gt; y=2;
&gt;&gt; z=x+y;
&gt;&gt; fprintf("the value of z is %d\n",z)
the value of z is 3
&gt;&gt; feature('numcores')
MATLAB detected: 28 physical cores.
MATLAB detected: 28 logical cores.
MATLAB was assigned: 2 logical cores by the OS.
MATLAB is using: 2 logical cores.
MATLAB is not using all logical cores because Operating System restricted the number of cores to: 2.

ans =

     2

&gt;&gt; 
</code></pre></div></div> <p>Observe that here Matlab detect that there are 28 physical cores (the number of cores of the node), but that only 2 are available (the number of cores requested in the <code class="language-plaintext highlighter-rouge">oarsub</code> command).</p> <p>When you are done, you can exit matlab:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt; exit
</code></pre></div></div> <h2 id="launching-matlab-in-interactive-mode-graphical"> <a href="#launching-matlab-in-interactive-mode-graphical" class="anchor-heading" aria-labelledby="launching-matlab-in-interactive-mode-graphical"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Launching matlab in interactive mode (graphical) </h2> <p>The command line interface of matlab is not very user friendly. It is possible to launch matlab in graphical mode. To do so, we need to allow X forwarding. In Linux and MacOS this is obtained by adding the parameter <code class="language-plaintext highlighter-rouge">-X</code> to the ssh command:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh <span class="nt">-X</span> calculco
</code></pre></div></div> <p>in Windows, if Mobaxterm is used, X forwarding is enabled by default.</p> <p>Once connected to calculco, the procedure is the same as before, but matlab is launched without the parameters <code class="language-plaintext highlighter-rouge">-nodisplay -nodesktop -nosplash</code>:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>oarsub <span class="nt">-I</span> <span class="nt">-l</span> /nodes<span class="o">=</span>1/core<span class="o">=</span>2,walltime<span class="o">=</span>1:00:00
ml matlab
matlab
</code></pre></div></div> <p>This will open the familiar matlab interface.</p> <h2 id="matlab-tokens"> <a href="#matlab-tokens" class="anchor-heading" aria-labelledby="matlab-tokens"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Matlab tokens </h2> <p>Matlab is a commercial software. In order to use it, you need to have a valid license. On calculco, the license is managed by tokens. This means that if all tokens are used, you cannot use matlab. It is also possible to use matlab on your own computer using calculco tokens, but this is beyond the scope of this tutorial.</p> <h2 id="launching-matlab-in-batch-mode"> <a href="#launching-matlab-in-batch-mode" class="anchor-heading" aria-labelledby="launching-matlab-in-batch-mode"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Launching matlab in batch mode </h2> <p>Using matlab in interactive mode is useful for prototyping. Once you want to run a <em>real</em> simulation, you probably want to use matlab in batch mode.</p> <p>In order to do so you need to create a matlab script (using for example nano). For instance, create a file “test_calculco.m” containing:</p> <div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
<span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span>
<span class="n">z</span><span class="o">=</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">;</span>
<span class="nb">fprintf</span><span class="p">(</span><span class="s2">"the value of z is %d\n"</span><span class="p">,</span><span class="n">z</span><span class="p">)</span>
</code></pre></div></div> <p>then you can run the script using:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>matlab <span class="nt">-nodisplay</span> <span class="nt">-nodesktop</span> <span class="nt">-nosplash</span> <span class="nt">-batch</span> <span class="s2">"test_calculco"</span>
</code></pre></div></div> <p>you shold obtain the following output:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dfontanari@orval04:~$ matlab -nodisplay -nodesktop -nosplash -batch "test_calculco"
the value of z is 3
dfontanari@orval04:~$ 
</code></pre></div></div> <p>Now it is time to run everything as a batch job. To do so we create a file called <code class="language-plaintext highlighter-rouge">test_calculco.oar</code>, in the same directory as <code class="language-plaintext highlighter-rouge">test_calculco.m</code>, containing:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c">#OAR -l /nodes=1/core=2,walltime=1:00:00</span>
<span class="c">#OAR -o test_calculco.log</span>
<span class="c">#OAR -n test_calculco</span>

<span class="nb">source</span> /nfs/opt/env/env.sh
ml matlab
matlab <span class="nt">-nodisplay</span> <span class="nt">-nodesktop</span> <span class="nt">-nosplash</span> <span class="nt">-batch</span> <span class="s2">"test_calculco"</span> <span class="o">&gt;</span> test_calculco.out
</code></pre></div></div> <p>Here the only new thing is the line <code class="language-plaintext highlighter-rouge">source /nfs/opt/env/env.sh</code>. This line is necessary in order to use the command <code class="language-plaintext highlighter-rouge">ml</code> inside a batch script. Also the <code class="language-plaintext highlighter-rouge">&gt;</code> operator is used to redirect the output of matlab to a file called <code class="language-plaintext highlighter-rouge">test_calculco.out</code>.</p> <p>We set this file as executable using:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chmod</span> +x test_calculco.oar
</code></pre></div></div> <p>then we submit the job using:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>oarsub <span class="nt">-S</span> ./test_calculco.oar
</code></pre></div></div> <p>we should now have a file <code class="language-plaintext highlighter-rouge">test_calculco.out</code> containing:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>the value of z is 3
</code></pre></div></div> <h2 id="compiling-matlab-code"> <a href="#compiling-matlab-code" class="anchor-heading" aria-labelledby="compiling-matlab-code"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Compiling matlab code </h2> <p>As mentioned before matlab works on a tokes system. In particular its different “toolboxes” (specialised libraries) all uses tokens. In this way if too many user are using some matlab toolboxes at the same time, the system will not be able to provide enough tokens for everyone. A way to avoid this problem is to compile your matlab code. This way you will not need any token to run your code. The drawback is that you will not be able to modify your code anymore. (and the compilation process itself requires tokens). Back to our example we can compile the code using (provided that the command <code class="language-plaintext highlighter-rouge">ml matlab</code> has been executed):</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mcc <span class="nt">-mv</span> test_calculco.m
</code></pre></div></div> <p>a new file <code class="language-plaintext highlighter-rouge">test_calculco</code> is created. This is an executable file that can be run without any token, from a computation node:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>oarsub <span class="nt">-I</span> <span class="nt">-l</span> /nodes<span class="o">=</span>1/core<span class="o">=</span>2,walltime<span class="o">=</span>1:00:00
ml matlab/MCR_2023b
./test_calculco
</code></pre></div></div> <p>where the line <code class="language-plaintext highlighter-rouge">ml matlab/MCR_2023b</code> is necessary to load the matlab runtime environment (and its version should match the version used to compile the code).</p> <p>obviously it is possible to create a batch script to run the compiled code:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c">#OAR -l /nodes=1/core=2,walltime=1:00:00</span>
<span class="c">#OAR -o test_calculco.log</span>
<span class="c">#OAR -n test_calculco</span>

<span class="nb">source</span> /nfs/opt/env/env.sh
ml MCR_2023b
./test_calculco <span class="o">&gt;</span> test_calculco.out
</code></pre></div></div> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
